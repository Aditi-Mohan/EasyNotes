#: import gch kivy.utils.get_color_from_hex
#: import PieChartLine libs.baseclass.pie_chart_line.PieChartLine


<RallyBillsScreen>
	BoxLayout:
		id: bxlay
		orientation: 'horizontal'
	
		ScrollView:
			size_hint: 0.3, 1
			MDList:
				id: pending
		
		BoxLayout:
			orientation: 'vertical'
			size_hint: 0.7, 1

			BoxLayout:
				orientation: 'horizontal'
				size_hint: 1, 0.1

				MDIconButton:
					icon: "account-search"
					on_release: self.search()
				
				RallyTextField:
					id: search_bar
					hint_text: "Username or Uid"
			
			OneLineListItem:
				text: 'Friends'

			ScrollView:
				size_hint: 1, 0.85

				MDList:
					id: friends
				
	MDFloatingActionButton:
    	icon: "plus"
    	md_bg_color: app.theme_cls.primary_color
		pos: self.parent.size[0]- self.size[0] - 10, 10
		on_release: root.send_request()

<RequestPopup>:
	FloatLayout:
		RallyTextField:
			id: uid
			focus: True
			hint_text: "Uid of User"
			size_hint_x: 0.95
			pos_hint: {'x': 0.1, 'y': 0.8}
			input_filter: 'int'
		
		TextInput:
			id: comments
			multiline: True
			size_hint: 0.95, 0.3
			pos_hint: {'x': 0.1, 'y': 0.3}
			hint_text: "A Little Something For Them to Get to Know You"
		
		MDFillRoundFlatButton:
			text: 'DONE'
			pos_hint: {'x': 0.55, 'y': 0.1}
			on_press: root.evaluate()

<AddressRequest>:
	FloatLayout:

		Label:
			text: 'From: '+root.req.name
			text_size: self.size
			font_size: 30
			size_hint: 0.5, 0.1
			halign: 'left'
			pos_hint: {'x': 0.2, 'y': 0.9}
			canvas.before:
    			Color:
			    	rgba: [0, 0, 0, 0]
				Rectangle:
					pos: self.pos
					size: self.size

		Label:
			text: 'Sent On: '+root.sent_on
			text_size: self.size
			font_size: 16
			size_hint: 0.5, 0.1
			pos_hint: {'x': 0.2, 'y': 0.85}
			canvas.before:
    			Color:
			    	rgba: [0, 0, 0, 0]
				Rectangle:
					pos: self.pos
					size: self.size

		Label:
			text: 'College: '+root.req.college
			text_size: self.size
			size_hint: 0.5, 0.1
			font_size: 18
			halign: 'left'
			pos_hint: {'x': 0.2, 'y': 0.8}
			canvas.before:
    			Color:
			    	rgba: [0, 0, 0, 0]
				Rectangle:
					pos: self.pos
					size: self.size

		Label:
			text: 'Course: '+root.req.course
			text_size: self.size
			size_hint: 0.5, 0.1
			font_size: 18
			halign: 'left'
			pos_hint: {'x': 0.2, 'y': 0.75}
			canvas.before:
    			Color:
			    	rgba: [0, 0, 0, 0]
				Rectangle:
					pos: self.pos
					size: self.size

		Label:
			text: 'Semester: '+root.semester
			text_size: self.size
			font_size: 18
			size_hint: 0.5, 0.1
			halign: 'left'
			pos_hint: {'x': 0.2, 'y': 0.7}
			canvas.before:
    			Color:
			    	rgba: [0, 0, 0, 0]
				Rectangle:
					pos: self.pos
					size: self.size
		
		BoxLayout:
			orientation: 'horizontal'
			size_hint: 0.8, 0.3
			pos_hint: {'x': 0.2, 'y': 0.3}

			MDIconButton:
				icon: "message"
				pos_hint: {'x': 0, 'y': 0.9}

			Label:
				text: root.req.comments
				text_size: self.size
				font_size: 16
				size_hint: 0.8, 1
				pos_hint: {'x': 0, 'y': 0}
				halign: 'left'
				valign: 'top'
				canvas.before:
					Color:
						rgba: [0, 0, 0, 0.3]
					Rectangle:
						pos: self.pos
						size: self.size
		
		BoxLayout:
			orientation: 'horizontal'
			spacing: 50
			padding_x: [250, 250]
			pos_hint: {'x': 0.2, 'y': 0.2}

			MDFillRoundFlatButton:
				text: 'ACCEPT'
				on_press: root.address_request('accepted')
			
			MDFillRoundFlatButton:
				text: 'REJECT'
				md_bg_color: 1, 0, 0, 1
				on_press: root.address_request('reject')

<FriendDetails>:
	FloatLayout:

		Label:
			text: 'Name: '+root.friend.name
			text_size: self.size
			font_size: 30
			size_hint: 0.5, 0.1
			halign: 'left'
			pos_hint: {'x': 0.2, 'y': 0.9}
			canvas.before:
    			Color:
			    	rgba: [0, 0, 0, 0]
				Rectangle:
					pos: self.pos
					size: self.size

		Label:
			text: 'Befriended On: '+root.added_on
			text_size: self.size
			font_size: 16
			size_hint: 0.5, 0.1
			pos_hint: {'x': 0.2, 'y': 0.85}
			canvas.before:
    			Color:
			    	rgba: [0, 0, 0, 0]
				Rectangle:
					pos: self.pos
					size: self.size

		Label:
			text: 'Last Interaction On: '+root.last_interaction
			text_size: self.size
			font_size: 16
			size_hint: 0.5, 0.1
			pos_hint: {'x': 0.2, 'y': 0.8}
			canvas.before:
    			Color:
			    	rgba: [0, 0, 0, 0]
				Rectangle:
					pos: self.pos
					size: self.size

		Label:
			text: 'College: '+root.friend.college
			text_size: self.size
			size_hint: 0.5, 0.1
			font_size: 18
			halign: 'left'
			pos_hint: {'x': 0.2, 'y': 0.75}
			canvas.before:
    			Color:
			    	rgba: [0, 0, 0, 0]
				Rectangle:
					pos: self.pos
					size: self.size

		Label:
			text: 'Course: '+root.friend.course
			text_size: self.size
			size_hint: 0.5, 0.1
			font_size: 18
			halign: 'left'
			pos_hint: {'x': 0.2, 'y': 0.7}
			canvas.before:
    			Color:
			    	rgba: [0, 0, 0, 0]
				Rectangle:
					pos: self.pos
					size: self.size

		Label:
			text: 'Semester: '+root.semester
			text_size: self.size
			font_size: 18
			size_hint: 0.5, 0.1
			halign: 'left'
			pos_hint: {'x': 0.2, 'y': 0.65}
			canvas.before:
    			Color:
			    	rgba: [0, 0, 0, 0]
				Rectangle:
					pos: self.pos
					size: self.size

		Label:
			text: 'Total Notes Received: '+root.notes_received
			text_size: self.size
			font_size: 18
			size_hint: 0.5, 0.1
			halign: 'left'
			pos_hint: {'x': 0.2, 'y': 0.6}
			canvas.before:
    			Color:
			    	rgba: [0, 0, 0, 0]
				Rectangle:
					pos: self.pos
					size: self.size

		Label:
			text: 'Total Notes Sent: '+root.notes_sent
			text_size: self.size
			font_size: 18
			size_hint: 0.5, 0.1
			halign: 'left'
			pos_hint: {'x': 0.2, 'y': 0.55}
			canvas.before:
    			Color:
			    	rgba: [0, 0, 0, 0]
				Rectangle:
					pos: self.pos
					size: self.size
			
		MDFillRoundFlatButton:
			text: 'UNFRIEND'
			pos_hint: {'x': 0.8, 'y': 0.5}
			md_bg_color: 1, 0, 0, 1
			on_press: root.rem_fr()
		
		BoxLayout:
			orientation: 'horizontal'
			size_hint: 0.95, 0.4
			pos_hint: {'x': 0.1, 'y': 0.1}

			ScrollView:
				size_hint: 0.5, 1
				MDList:
					id: sent

					OneLineListItem:
						text: 'Sent Notes'
			# show a tile indicating no shared notes if none
			
			ScrollView:
				size_hint: 0.5, 1
				MDList:
					id: received

					OneLineListItem:
						text: 'Received Notes'
			# show a tile indicating no shared notes if none

<Conformation>:
	FloatLayout:
		Label:
			text: 'Are you sure you want to remove '+root.name+' from your friends?'
			text_size: self.size
			font_size: 18
			size_hint: 1, 0.2
			halign: 'left'
			pos_hint: {'x': 0.6, 'y': 1.3}
			canvas.before:
    			Color:
		    		rgba: [0, 0, 0, 0]
				Rectangle:
					pos: self.pos
					size: self.size

		MDFillRoundFlatButton:
			text: 'YES'
			md_bg_color: 1, 0, 0, 1
			pos_hint: {'x': 0.75, 'y': 0.7}
			on_press: root.callback_callback('yes')
			
		MDFillRoundFlatButton:
			text: 'NO'
			pos_hint: {'x': 1.15, 'y': 0.7}
			on_press: root.callback_callback('no')